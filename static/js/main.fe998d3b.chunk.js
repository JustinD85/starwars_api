(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(33)},19:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),s=n.n(i),c=(n(19),n(3)),o=n(1),l=n.n(o),u=n(12),m=n(2),f=n(5),p=n(6),v=n(8),d=n(7),h=n(9),g=(n(23),n(25),function(e){var t=e.film;return t?r.a.createElement("div",{className:"ScrollingText"},r.a.createElement("section",null,r.a.createElement("p",null,t.opening_crawl),r.a.createElement("h1",null,t.title),r.a.createElement("span",null,t.release_date))):r.a.createElement("div",{className:"loading"},"Loading")}),b=(n(27),function(e){var t=e.setCurrentFilter,n=e.favoriteCount,a=e.currentFilter;return r.a.createElement("section",{className:"FilterSection"},["people","vehicles","planets"].map(function(e){var n="";return a===e&&(n="selected"),r.a.createElement("button",{key:e,onClick:function(){return t(e)},className:e+" "+n},e)}),["favorites"].map(function(){var e="favorites";return"favorites"===a&&(e+=" selected"),r.a.createElement("button",{key:"favorites",onClick:function(){return t("favorites")},className:e},"Favorites: ",n||"none")}))}),E=n(4),F=(n(29),n(31),function(e){var t=e.name,n=e.result,a=e.toggleFavorite,i=e.id,s=e.isFav,c=e.audio,o=s?"\u2b50\ufe0f":"\u2606";return r.a.createElement("div",{className:"Card",onMouseEnter:function(){return c.current.play()}},r.a.createElement("div",{className:"favorite-card",onClick:function(e){return a(e.target.id)},id:i}," ",o),r.a.createElement("h3",null,t),n)}),k=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(v.a)(this,Object(d.a)(t).call(this,e))).setAllData=function(){var e=["planets","species","vehicles","people"].map(function(e){return n.setAllOfType(e)});Promise.all(e).then(function(){return n.setState({isLoaded:!0})})},n.setAllOfType=function(){var e=Object(m.a)(l.a.mark(function e(t){var a,r,i,s,o,u,m,f,p,v=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>1&&void 0!==v[1]?v[1]:"",r=n.props,i=r.getData,s=r.favorites,e.next=4,i("".concat(t).concat(a));case 4:return o=e.sent,u=n.state[t],m=o.results.map(function(e){return e.isFavorite=!!s.find(function(t){return e.url.includes(t)}),e.type=t,e}),e.next=9,n.setState(Object(E.a)({},t,Object(c.a)(u).concat(Object(c.a)(m))));case 9:if(!o.next){e.next=14;break}return f=o.next.search(/\?/),p=o.next.substring(f),e.next=14,n.setAllOfType(t,p);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.setCard=function(e){switch(e.type){case"people":var t,a=n.lookUp("planets","url",e.homeworld),i=a.name,s=a.population;return t=e.species.length?n.lookUp("species","url",e.species[0]).name:"unknown",[r.a.createElement("div",null,"Planet: ",i),r.a.createElement("div",null,"Pop: ",s),r.a.createElement("div",null,"Species: ",t)];case"planets":var c=e.terrain,o=e.population,l=e.climate;return[r.a.createElement("div",null,"Terrain: ",c),r.a.createElement("div",null,"Pop: ",o),r.a.createElement("div",null,"Climate: ",l)];default:var u=e.model,m=e.vehicle_class,f=e.passengers;return[r.a.createElement("div",null,"Model: ",u),r.a.createElement("div",null,"Class: ",m),r.a.createElement("div",null,"Fits: ",f)]}},n.lookUp=function(e,t,a){return n.state[e].find(function(e){return e[t]===a})},n.updateFavorites=function(e){n.props.toggleFavorite(e);var t=e.split("/")[0],a=n.state[t].slice().map(function(t){return t.url.includes(e)&&(t.isFavorite=!t.isFavorite),t});n.setState(Object(E.a)({},t,a))},n.getFavorites=function(e,t){return["people","vehicles","planets"].map(function(e){return Object(c.a)(n.state[e])}).flat().filter(function(e){return e.isFavorite}).map(function(a,r){return r>=e&&r<=t&&n.getCard(a)})},n.getCardsOfType=function(e,t,a){return n.state[e].map(function(e,r){return r>=t&&r<=a&&n.getCard(e)})},n.state={people:[],vehicles:[],planets:[],species:[],isLoaded:!1},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"getCard",value:function(e){var t=/\w+\/\d+\//.exec(e.url);return r.a.createElement(F,{key:e.name,name:e.name,toggleFavorite:this.updateFavorites,id:t,audio:this.props.audio,isFav:e.isFavorite,result:this.setCard(e)})}},{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.isLoaded;case 2:this.setAllData();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.currentFilter,n=e.min,i=e.max,s=e.changeNumber,c=this.state.isLoaded,o="favorites"===t?"props":"state",l="favorites"!==t;return r.a.createElement("section",{className:"CardArea"},t&&r.a.createElement(a.Fragment,null,n>0&&r.a.createElement("button",{className:"previous",onClick:function(){return s(-9)}},"<"),l?this.getCardsOfType(t,n,i):this.getFavorites(n,i),i<this[o][t].length-1&&r.a.createElement("button",{className:"next",onClick:function(){return s(9)}},">")),!t&&c&&r.a.createElement("div",null,"Pick something young Jedi"),!c&&r.a.createElement("div",null,"Loading!"))}}]),t}(a.Component),O={getData:function(){var e=Object(m.a)(l.a.mark(function e(t){var n,a,r=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.next=3,fetch("https://swapi.co/api/".concat(t).concat(n));case 3:if(!(a=e.sent).ok){e.next=8;break}return e.abrupt("return",a.json());case 8:throw new Error("Error fetching Data");case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},x=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).setRandomFilm=Object(m.a)(l.a.mark(function t(){var n,a,r,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.getData("films");case 3:n=t.sent,a=n.results,r=a.length,i=Math.floor(Math.random()*r),e.setState({film:Object(u.a)({},a[i])}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.setState({error:t.t0.message});case 13:case"end":return t.stop()}},t,this,[[0,10]])})),e.toggleFavorite=function(t){var n=e.state.favorites.slice();n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),localStorage.setItem("favorites",JSON.stringify(n)),e.setState({favorites:n})},e.setCurrentFilter=function(t){e.setState({currentFilter:t,min:0,max:8})},e.changeNumber=function(t){e.setState({min:e.state.min+t,max:e.state.max+t})},e.state={film:{},favorites:[],currentFilter:null,min:0,max:0,error:null},e.audio=r.a.createRef(),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({favorites:JSON.parse(localStorage.getItem("favorites"))||[]}),this.setRandomFilm()}},{key:"render",value:function(){var e=this.state,t=e.film,n=e.currentFilter,a=e.min,i=e.max,s=e.favorites;return r.a.createElement("div",{className:"App"},r.a.createElement(g,{film:t}),r.a.createElement(b,{setCurrentFilter:this.setCurrentFilter,favoriteCount:s.length,currentFilter:n}),r.a.createElement(k,{currentFilter:n,getData:O.getData,min:a,max:i,audio:this.audio,favorites:Object(c.a)(s),changeNumber:this.changeNumber,toggleFavorite:this.toggleFavorite}),r.a.createElement("audio",{ref:this.audio},r.a.createElement("source",{src:"./beep4.mp3"})),r.a.createElement("img",{className:"background",src:"./sw_background.jpg",alt:"shows deathstar in background"}))}}]),t}(a.Component);s.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.fe998d3b.chunk.js.map